def check_win(board, player):
    # Check for horizontal, vertical, and diagonal win conditions
    return (
        (board['1'] == board['2'] == board['3'] == player) or
        (board['4'] == board['5'] == board['6'] == player) or
        (board['7'] == board['8'] == board['9'] == player) or
        (board['1'] == board['4'] == board['7'] == player) or
        (board['2'] == board['5'] == board['8'] == player) or
        (board['3'] == board['6'] == board['9'] == player) or
        (board['1'] == board['5'] == board['9'] == player) or
        (board['3'] == board['5'] == board['7'] == player)
    )

theBoard = {'1': ' ', '2': ' ', '3': ' ',
            '4': ' ', '5': ' ', '6': ' ',
            '7': ' ', '8': ' ', '9': ' '}

def printBoard(board):
    print(board['1'] + '|' + board['2'] + '|' + board['3'])
    print('-+-+-')
    print(board['4'] + '|' + board['5'] + '|' + board['6'])
    print('-+-+-')
    print(board['7'] + '|' + board['8'] + '|' + board['9'])

turn = 'X'
for i in range(9):
    printBoard(theBoard)
    print('Turn for ' + turn + '. Move on which space?')
    move = input()
    
    # Check if the move is valid (the chosen position is empty)
    if theBoard[move] == ' ':
        theBoard[move] = turn
    else:
        print("Invalid move. Position already taken. Try again.")
        continue
    
    # Check for win condition after each move
    if check_win(theBoard, turn):
        printBoard(theBoard)
        print('Player ' + turn + ' wins!')
        break
    
    # Check for tie condition
    if i == 8:  # All positions filled, and no one won
        printBoard(theBoard)
        print("It's a tie!")

    # Switch turn for the next move
    if turn == 'X':
        turn = 'O'
    else:
        turn = 'X'